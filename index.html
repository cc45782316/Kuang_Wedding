<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding Invitation | æŒ¯ç¿° & ä½©åŸ</title>
    <!-- å¼•å…¥ Google Fonts å­—å‹ -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&family=Pinyon+Script&display=swap" rel="stylesheet">
    <!-- å¼•å…¥ Tailwind CSS å¿«é€Ÿæ’ç‰ˆ -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'wedding-pink': '#EBC9C3',
                        'wedding-blue': '#A6C6D3',
                        'wedding-text': '#5A4A42',
                        'wedding-bg': '#FDFBF7',
                    },
                    fontFamily: {
                        'serif': ['"Noto Serif TC"', 'serif'],
                        'script': ['"Pinyon Script"', 'cursive'],
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Noto Serif TC', serif;
            background-color: #FDFBF7;
            color: #5A4A42;
            overflow-x: hidden;
        }
        
        /* éŸ³æ¨‚æŒ‰éˆ•æ—‹è½‰å‹•ç•« */
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .spin-animation {
            animation: spin 4s linear infinite;
        }

        /* å¹³æ»‘æ²å‹• */
        html {
            scroll-behavior: smooth;
        }

        /* è‡ªå®šç¾©æ¨£å¼å¢å¼· */
        .glass-panel {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .hero-bg {
            /* é è¨­ä½¿ç”¨æ‚¨çš„ç…§ç‰‡ */
            background-image: url('Hun-Sha-25.09.19Pei-Yin-Zhen-Han-0091.jpg'); 
            background-size: cover;
            background-position: center;
            background-attachment: fixed; /* è¦–å·®æ»¾å‹•æ•ˆæœ */
        }

        /* ç‚ºäº†æ‰‹æ©Ÿæ¿å„ªåŒ–èƒŒæ™¯é¡¯ç¤º */
        @media (max-width: 768px) {
            .hero-bg {
                background-attachment: scroll;
                background-position: center top;
            }
        }
        
        /* Loading å‹•ç•« */
        .dot-flashing {
            position: relative;
            width: 10px;
            height: 10px;
            border-radius: 5px;
            background-color: #EBC9C3;
            color: #EBC9C3;
            animation: dot-flashing 1s infinite linear alternate;
            animation-delay: 0.5s;
        }
        .dot-flashing::before, .dot-flashing::after {
            content: "";
            display: inline-block;
            position: absolute;
            top: 0;
        }
        .dot-flashing::before {
            left: -15px;
            width: 10px;
            height: 10px;
            border-radius: 5px;
            background-color: #EBC9C3;
            color: #EBC9C3;
            animation: dot-flashing 1s infinite alternate;
            animation-delay: 0s;
        }
        .dot-flashing::after {
            left: 15px;
            width: 10px;
            height: 10px;
            border-radius: 5px;
            background-color: #EBC9C3;
            color: #EBC9C3;
            animation: dot-flashing 1s infinite alternate;
            animation-delay: 1s;
        }
        @keyframes dot-flashing {
            0% { background-color: #EBC9C3; }
            50%, 100% { background-color: #fce7e3; }
        }
    </style>
</head>
<body class="antialiased">

    <!-- éŸ³æ¨‚æ§åˆ¶æŒ‰éˆ• -->
    <div id="music-control" class="fixed top-5 right-5 z-50 cursor-pointer transition-transform hover:scale-110">
        <div class="w-12 h-12 rounded-full bg-white/80 border border-wedding-pink flex items-center justify-center shadow-lg backdrop-blur-sm">
            <!-- éŸ³ç¬¦åœ–ç¤º SVG -->
            <svg id="music-icon" xmlns="http://www.w3.org/2000/svg" class="w-6 h-6 text-wedding-text" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z"/>
            </svg>
        </div>
        <!-- éŸ³æ¨‚æª”æ¡ˆ: è«‹ç¢ºèªæª”æ¡ˆåç¨±ç‚º music.mp3 -->
        <audio id="bg-music" loop>
            <source src="music.mp3" type="audio/mpeg">
        </audio>
    </div>

    <!-- å€å¡Šä¸€ï¼šä¸»è¦–è¦º Hero Section (ç…§ç‰‡ 0091) -->
    <section class="relative h-screen w-full hero-bg flex flex-col justify-end items-center pb-20 text-center" id="hero">
        <!-- åœ–ç‰‡è¼‰å…¥å¤±æ•—æ™‚çš„å¾Œå‚™è™•ç† -->
        <img src="Hun-Sha-25.09.19Pei-Yin-Zhen-Han-0091.jpg" 
             onerror="this.parentElement.style.backgroundImage='url(https://images.unsplash.com/photo-1583939003579-730e3918a45a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1920&q=80)'" 
             style="display:none;">

        <div class="glass-panel p-8 rounded-xl shadow-xl max-w-lg mx-4 mb-10 transform transition-all hover:-translate-y-1 duration-500">
            <h2 class="font-script text-4xl md:text-6xl text-wedding-text mb-2">Wedding Invitation</h2>
            <h1 class="text-3xl md:text-4xl font-bold tracking-widest text-gray-700 uppercase mb-4">æŒ¯ç¿° & ä½©åŸ</h1>
            <div class="w-16 h-1 bg-wedding-pink mx-auto mb-4"></div>
            <p class="text-lg md:text-xl tracking-wide">2026.06.13 | 12:00 PM</p>
            <p class="text-sm text-gray-500 mt-2">èª æ‘¯é‚€è«‹æ‚¨åƒèˆ‡æˆ‘å€‘çš„å–œæ‚…</p>
        </div>
        
        <div class="absolute bottom-5 animate-bounce text-white drop-shadow-md">
            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg>
        </div>
    </section>

    <!-- å€å¡ŠäºŒï¼šå€’æ•¸è¨ˆæ™‚èˆ‡ç…§ç‰‡ (ç…§ç‰‡ 0359) -->
    <section class="py-20 px-6 md:px-20 bg-wedding-bg overflow-hidden">
        <div class="max-w-6xl mx-auto flex flex-col md:flex-row items-center gap-12">
            
            <!-- å·¦å´ï¼šç…§ç‰‡ -->
            <div class="w-full md:w-1/2 relative group">
                <div class="absolute -inset-1 bg-gradient-to-r from-wedding-pink to-wedding-blue rounded-2xl blur opacity-25 group-hover:opacity-75 transition duration-1000 group-hover:duration-200"></div>
                <div class="relative rounded-2xl overflow-hidden shadow-2xl rotate-2 hover:rotate-0 transition-transform duration-500">
                    <img src="Hun-Sha-25.09.19Pei-Yin-Zhen-Han-0359.jpg" 
                         alt="Wedding Couple at Beach" 
                         class="w-full h-auto object-cover"
                         onerror="this.src='https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80'">
                </div>
            </div>

            <!-- å³å´ï¼šå€’æ•¸è¨ˆæ™‚å™¨ -->
            <div class="w-full md:w-1/2 text-center md:text-left">
                <h3 class="font-script text-4xl text-wedding-blue mb-2">Count down to our big day</h3>
                <h2 class="text-3xl font-bold text-gray-700 mb-8">è·é›¢å¹¸ç¦æ™‚åˆ»é‚„æœ‰</h2>
                
                <div class="grid grid-cols-4 gap-4 text-center">
                    <div class="bg-white p-4 rounded-lg shadow-md border-t-4 border-wedding-pink">
                        <span id="days" class="block text-3xl md:text-4xl font-bold text-gray-800">00</span>
                        <span class="text-sm text-gray-500">å¤©</span>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-md border-t-4 border-wedding-blue">
                        <span id="hours" class="block text-3xl md:text-4xl font-bold text-gray-800">00</span>
                        <span class="text-sm text-gray-500">æ™‚</span>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-md border-t-4 border-wedding-pink">
                        <span id="minutes" class="block text-3xl md:text-4xl font-bold text-gray-800">00</span>
                        <span class="text-sm text-gray-500">åˆ†</span>
                    </div>
                    <div class="bg-white p-4 rounded-lg shadow-md border-t-4 border-wedding-blue">
                        <span id="seconds" class="block text-3xl md:text-4xl font-bold text-gray-800">00</span>
                        <span class="text-sm text-gray-500">ç§’</span>
                    </div>
                </div>

                <div class="mt-10 p-6 bg-white rounded-lg shadow-sm border border-gray-100">
                    <p class="text-gray-600 leading-relaxed italic">
                        "åŸ·å­ä¹‹æ‰‹ï¼Œèˆ‡å­å•è€"<br>
                        æœŸå¾…åœ¨æµ·é‚Šèˆ‡æ‚¨åˆ†äº«æˆ‘å€‘çš„å–œæ‚…ï¼Œè¦‹è­‰æˆ‘å€‘çš„æ„›æƒ…ã€‚
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- [æ–°å¢å€å¡Š]ï¼šæ–°äººè‡´è© -->
    <section class="py-16 px-6 bg-white">
        <div class="max-w-3xl mx-auto text-center">
            <h2 class="font-script text-4xl text-wedding-pink mb-4">Our Story</h2>
            <h3 class="text-2xl font-bold text-gray-700 mb-8">è‡´ è¦ªæ„›çš„ä½ å€‘</h3>
            <p class="text-gray-600 leading-loose text-lg mb-6">
                åœ¨é€™å€‹ç‰¹åˆ¥çš„æ—¥å­è£¡ï¼Œ<br>
                æ„Ÿè¬å‘½é‹è®“æˆ‘å€‘ç›¸é‡ï¼Œä¹Ÿæ„Ÿè¬æ‚¨çš„é™ªä¼´èˆ‡è¦‹è­‰ã€‚<br>
                å¾ç›¸è­˜ã€ç›¸çŸ¥åˆ°ç›¸å®ˆï¼Œæˆ‘å€‘æ±ºå®šæ”œæ‰‹å…±åº¦é¤˜ç”Ÿã€‚<br>
                æ‚¨çš„ç¥ç¦æ˜¯æˆ‘å€‘æœ€çè²´çš„ç¦®ç‰©ï¼Œ<br>
                æœŸå¾…åœ¨å©šç¦®ä¸Šèˆ‡æ‚¨åˆ†äº«é€™ä»½å–œæ‚…èˆ‡æ„Ÿå‹•ã€‚
            </p>
            <div class="w-24 h-px bg-gray-300 mx-auto"></div>
        </div>
    </section>

    <!-- [æ–°å¢å€å¡Š]ï¼šç”œèœœç›¸ç°¿ (Photo Gallery) -->
    <section class="py-16 px-6 bg-wedding-bg">
        <div class="max-w-5xl mx-auto text-center mb-10">
            <h2 class="font-script text-4xl text-wedding-blue mb-4">Sweet Moments</h2>
            <h3 class="text-2xl font-bold text-gray-700">æˆ‘å€‘çš„é»é»æ»´æ»´</h3>
        </div>
        
        <!-- ç›¸ç°¿ç¶²æ ¼ï¼šé€™è£¡ä½¿ç”¨é è¨­åœ–ç‰‡ï¼Œæ‚¨å¯ä»¥å°‡ src æ›æˆè‡ªå·±çš„ç…§ç‰‡è·¯å¾‘ -->
        <div class="max-w-6xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- ç…§ç‰‡ 1 -->
            <div class="relative group overflow-hidden rounded-xl shadow-lg aspect-[3/4]">
                <img src="https://images.unsplash.com/photo-1519741497674-611481863552?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" 
                     alt="Photo 1" class="w-full h-full object-cover transition duration-500 group-hover:scale-110">
            </div>
            <!-- ç…§ç‰‡ 2 -->
            <div class="relative group overflow-hidden rounded-xl shadow-lg aspect-[3/4]">
                <img src="https://images.unsplash.com/photo-1511285560982-1351cdeb9821?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" 
                     alt="Photo 2" class="w-full h-full object-cover transition duration-500 group-hover:scale-110">
            </div>
            <!-- ç…§ç‰‡ 3 -->
            <div class="relative group overflow-hidden rounded-xl shadow-lg aspect-[3/4]">
                <img src="https://images.unsplash.com/photo-1606800052052-a08af7148866?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80" 
                     alt="Photo 3" class="w-full h-full object-cover transition duration-500 group-hover:scale-110">
            </div>
        </div>
        <p class="text-center text-gray-400 text-sm mt-4">* è«‹æ›¿æ›ç‚ºæ‚¨çš„ç”Ÿæ´»ç…§ *</p>
    </section>

    <!-- [æ–°å¢å€å¡Š]ï¼šå©šç¦®åœ°é» (Google Maps) -->
    <section class="py-16 px-6 bg-white">
        <div class="max-w-4xl mx-auto text-center">
            <h2 class="font-script text-4xl text-wedding-pink mb-4">Location</h2>
            <h3 class="text-2xl font-bold text-gray-700 mb-8">å©šç¦®åœ°é» & äº¤é€šè³‡è¨Š</h3>
            
            <div class="w-full h-96 bg-gray-200 rounded-xl overflow-hidden shadow-lg mb-8 relative">
                <!-- 
                    Google Maps åµŒå…¥èªªæ˜ï¼š
                    å·²æ›´æ–°ç‚ºæ‚¨æä¾›çš„å°åŒ—æ¼¢ä¾†å¤§é£¯åº—åœ°åœ–
                -->
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3614.2960817403587!2d121.61724117604004!3d25.057951977800833!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3442ad3ed58cbb4d%3A0xbe22eddf14047689!2z5Y-w5YyX5ryi5L6G5aSn6aOv5bqX!5e0!3m2!1szh-TW!2stw!4v1770028636959!5m2!1szh-TW!2stw" 
                    width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
                </iframe>
                <div class="absolute inset-0 flex items-center justify-center pointer-events-none bg-black/10">
                    <!-- é®ç½©åƒ…ä¾›è£é£¾ -->
                </div>
            </div>

            <!-- å°èˆªæŒ‰éˆ•ï¼šé€£çµåˆ°æ‚¨æä¾›çš„çŸ­ç¶²å€ -->
            <a href="https://maps.app.goo.gl/zmNuveKunESDSvGq5" target="_blank" 
               class="inline-flex items-center gap-2 bg-wedding-blue text-white px-8 py-3 rounded-full font-bold shadow-md hover:bg-blue-400 transition transform hover:-translate-y-1">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                </svg>
                é–‹å•Ÿ Google Maps å°èˆª
            </a>
        </div>
    </section>

    <!-- å€å¡Šä¸‰ï¼šå‡ºå¸­å›è¦†è¡¨å–® -->
    <section class="py-20 px-6 bg-wedding-bg border-t border-gray-100">
        <div class="max-w-xl mx-auto text-center">
            <!-- å·²ç§»é™¤ RSVP æ¨™é¡Œ -->
            <p class="text-gray-500 mb-10">è«‹æ–¼å©šç¦®å‰ä¸€å€‹æœˆå›è¦†ï¼Œä»¥ä¾¿æˆ‘å€‘çµ±è¨ˆäººæ•¸</p>

            <form id="rsvp-form" class="space-y-6 text-left" onsubmit="submitForm(event)">
                <div>
                    <label class="block text-gray-700 font-bold mb-2">æ‚¨çš„å¤§å</label>
                    <input type="text" name="name" required class="w-full px-4 py-3 rounded-lg bg-white border border-gray-200 focus:border-wedding-pink focus:ring-2 focus:ring-wedding-pink/20 outline-none transition" placeholder="è«‹è¼¸å…¥å…¨å">
                </div>

                <div>
                    <label class="block text-gray-700 font-bold mb-2">é è¨ˆå‡ºå¸­äººæ•¸</label>
                    <select name="count" class="w-full px-4 py-3 rounded-lg bg-white border border-gray-200 focus:border-wedding-pink focus:ring-2 focus:ring-wedding-pink/20 outline-none transition">
                        <option value="1">1 ä½</option>
                        <option value="2">2 ä½</option>
                        <option value="3">3 ä½</option>
                        <option value="4">4 ä½</option>
                        <option value="more">4 ä½ä»¥ä¸Š</option>
                    </select>
                </div>

                <div>
                    <label class="block text-gray-700 font-bold mb-2">æ˜¯å¦å‡ºå¸­</label>
                    <div class="flex gap-4">
                        <label class="flex-1 cursor-pointer">
                            <input type="radio" name="attend" value="æº–æ™‚å‡ºå¸­" checked class="peer sr-only">
                            <div class="p-3 text-center rounded-lg border border-gray-200 bg-white peer-checked:bg-wedding-pink peer-checked:text-white peer-checked:border-wedding-pink transition">
                                æº–æ™‚å‡ºå¸­
                            </div>
                        </label>
                        <label class="flex-1 cursor-pointer">
                            <input type="radio" name="attend" value="å«æ·šç¥ç¦" class="peer sr-only">
                            <div class="p-3 text-center rounded-lg border border-gray-200 bg-white peer-checked:bg-gray-500 peer-checked:text-white peer-checked:border-gray-500 transition">
                                å«æ·šç¥ç¦
                            </div>
                        </label>
                    </div>
                </div>

                <div>
                    <label class="block text-gray-700 font-bold mb-2">å‚™è¨»</label>
                    <textarea id="remarks-area" name="remarks" rows="3" class="w-full px-4 py-3 rounded-lg bg-white border border-gray-200 focus:border-wedding-pink focus:ring-2 focus:ring-wedding-pink/20 outline-none transition" placeholder="é£²é£Ÿç¦å¿Œã€å…’ç«¥æ¤…éœ€æ±‚æˆ–å…¶ä»–æƒ³èªªçš„è©±..."></textarea>
                    
                    <button type="button" onclick="openAIModal()" class="mt-2 text-sm text-wedding-pink hover:text-pink-600 font-semibold flex items-center gap-1 transition-colors cursor-pointer group">
                        <span class="group-hover:animate-pulse">âœ¨</span> ä¸çŸ¥é“å¯«ä»€éº¼ï¼ŸAI å¹«å¯«ç¥ç¦èª
                    </button>
                </div>

                <button type="submit" id="submit-btn" class="w-full bg-gradient-to-r from-wedding-pink to-pink-400 text-white font-bold py-4 rounded-full shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition duration-300 flex justify-center items-center">
                    <span>é€å‡ºå›è¦†</span>
                    <div id="loading-spinner" class="hidden ml-2 w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                </button>
            </form>
        </div>
    </section>

    <footer class="bg-gray-50 py-10 text-center text-gray-400 text-sm">
        <p>&copy; 2026 Zhen-Han & Pei-Yin. All Rights Reserved.</p>
        <p class="mt-2 text-xs">Designed with â¤ï¸</p>
    </footer>

    <!-- AI Modal (ä¿æŒåŸæ¨£) -->
    <div id="ai-modal" class="fixed inset-0 bg-black/50 z-50 hidden flex items-center justify-center p-4 backdrop-blur-sm transition-opacity opacity-0">
        <div class="bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden transform transition-all scale-95 opacity-0" id="ai-modal-content">
            <div class="bg-gradient-to-r from-wedding-pink to-pink-200 p-4 flex justify-between items-center">
                <h3 class="text-white font-bold text-lg flex items-center gap-2">âœ¨ AI ç¥ç¦èªå°å¹«æ‰‹</h3>
                <button onclick="closeAIModal()" class="text-white hover:bg-white/20 rounded-full p-1 transition">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div class="p-6">
                <p class="text-gray-600 text-sm mb-4">è«‹é¸æ“‡æ‚¨çš„èº«ä»½èˆ‡é¢¨æ ¼ï¼Œè®“ AI ç‚ºæ‚¨ç”Ÿæˆå°ˆå±¬ç¥ç¦èªï¼</p>
                <div class="space-y-4">
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">æˆ‘æ˜¯æ–°äººçš„...</label>
                        <select id="ai-relation" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wedding-pink">
                            <option value="æ‘¯å‹">æ‘¯å‹ (Good Friend)</option>
                            <option value="åŒäº‹">åŒäº‹ (Colleague)</option>
                            <option value="è¦ªæˆš">è¦ªæˆš (Relative)</option>
                            <option value="åŒå­¸">åŒå­¸ (Classmate)</option>
                            <option value="é•·è¼©">é•·è¼© (Elder)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-bold mb-2">ç¥ç¦é¢¨æ ¼</label>
                        <select id="ai-style" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-wedding-pink">
                            <option value="æº«é¦¨æ„Ÿäºº">æº«é¦¨æ„Ÿäºº (Touching)</option>
                            <option value="å¹½é»˜é¢¨è¶£">å¹½é»˜é¢¨è¶£ (Funny)</option>
                            <option value="æ–‡é’è©©æ„">æ–‡é’è©©æ„ (Poetic)</option>
                            <option value="ç°¡æ½”å¤§æ–¹">ç°¡æ½”å¤§æ–¹ (Simple)</option>
                            <option value="ç†±æƒ…æ´‹æº¢">ç†±æƒ…æ´‹æº¢ (Enthusiastic)</option>
                        </select>
                    </div>
                    <button onclick="generateBlessing()" id="generate-btn" class="w-full bg-wedding-blue text-white font-bold py-2 rounded-lg hover:bg-blue-300 transition mt-2 flex justify-center items-center gap-2">
                        <span>ğŸª„ é–‹å§‹ç”Ÿæˆ</span>
                    </button>
                    <div id="ai-result-container" class="hidden mt-4">
                        <label class="block text-gray-700 text-sm font-bold mb-2">AI å»ºè­°ï¼š</label>
                        <div class="bg-gray-50 p-4 rounded-lg border border-gray-200 text-gray-700 relative min-h-[80px]">
                            <p id="ai-result-text" class="text-sm leading-relaxed"></p>
                            <div id="ai-loading" class="hidden absolute inset-0 flex items-center justify-center bg-gray-50/80">
                                <div class="dot-flashing"></div>
                            </div>
                        </div>
                        <button onclick="applyBlessing()" class="w-full mt-3 border border-wedding-pink text-wedding-pink hover:bg-wedding-pink hover:text-white font-bold py-2 rounded-lg transition text-sm">
                            ä½¿ç”¨é€™æ®µç¥ç¦
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const weddingDate = new Date("2026-06-13T12:00:00").getTime();
        function updateTimer() {
            const now = new Date().getTime();
            const distance = weddingDate - now;
            if (distance < 0) {
                document.getElementById("timer").innerHTML = "æˆ‘å€‘å·²ç¶“çµå©šå•¦ï¼";
                return;
            }
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);
            const format = (num) => num < 10 ? `0${num}` : num;
            document.getElementById("days").innerText = format(days);
            document.getElementById("hours").innerText = format(hours);
            document.getElementById("minutes").innerText = format(minutes);
            document.getElementById("seconds").innerText = format(seconds);
        }
        setInterval(updateTimer, 1000);
        updateTimer();

        const musicBtn = document.getElementById('music-control');
        const bgMusic = document.getElementById('bg-music');
        const musicIcon = musicBtn.querySelector('div');
        let isPlaying = false;
        function toggleMusic() {
            if (isPlaying) {
                bgMusic.pause();
                musicIcon.classList.remove('spin-animation');
                musicIcon.style.backgroundColor = 'rgba(255,255,255,0.8)';
            } else {
                bgMusic.play().then(() => {
                    musicIcon.classList.add('spin-animation');
                    musicIcon.style.backgroundColor = '#EBC9C3';
                }).catch(e => console.log("æ’­æ”¾è¢«ç€è¦½å™¨é˜»æ“‹ï¼Œéœ€ä½¿ç”¨è€…äº’å‹•"));
            }
            isPlaying = !isPlaying;
        }
        musicBtn.addEventListener('click', toggleMusic);
        document.body.addEventListener('click', function() {
            if (!isPlaying) { toggleMusic(); }
        }, { once: true });

        function submitForm(e) {
            e.preventDefault();
            const googleAppsScriptURL = "https://script.google.com/macros/s/AKfycbztB_OW9km5DXFK5vQvvSUFz4gacuHpsDgFjQqMyyyUzi38FRT_oLd4HQlT1DoWD9j_/exec"; 
            
            const form = document.getElementById('rsvp-form');
            const submitBtn = document.getElementById('submit-btn');
            const btnText = submitBtn.querySelector('span');
            const spinner = document.getElementById('loading-spinner');

            submitBtn.disabled = true;
            submitBtn.classList.add('opacity-75', 'cursor-not-allowed');
            btnText.innerText = "è³‡æ–™å‚³é€ä¸­...";
            spinner.classList.remove('hidden');

            const formData = new FormData(form);
            const searchParams = new URLSearchParams(formData);

            fetch(googleAppsScriptURL, {
                method: 'POST',
                body: searchParams,
                mode: 'no-cors' 
            })
            .then(() => {
                alert("æ„Ÿè¬æ‚¨çš„å›è¦†ï¼æˆ‘å€‘å·²ç¶“æ”¶åˆ°è³‡æ–™å›‰ï¼");
                form.reset();
            })
            .catch(error => {
                console.error('Error:', error);
                alert("å“å‘€ï¼Œå‚³é€å¤±æ•—äº†ï¼Œè«‹æª¢æŸ¥ç¶²è·¯é€£ç·šæˆ–ç¨å¾Œå†è©¦ã€‚");
            })
            .finally(() => {
                submitBtn.disabled = false;
                submitBtn.classList.remove('opacity-75', 'cursor-not-allowed');
                btnText.innerText = "é€å‡ºå›è¦†";
                spinner.classList.add('hidden');
            });
        }

        const modal = document.getElementById('ai-modal');
        const modalContent = document.getElementById('ai-modal-content');
        function openAIModal() {
            modal.classList.remove('hidden');
            setTimeout(() => {
                modal.classList.remove('opacity-0');
                modalContent.classList.remove('scale-95', 'opacity-0');
            }, 10);
        }
        function closeAIModal() {
            modal.classList.add('opacity-0');
            modalContent.classList.add('scale-95', 'opacity-0');
            setTimeout(() => {
                modal.classList.add('hidden');
                document.getElementById('ai-result-container').classList.add('hidden');
                document.getElementById('ai-result-text').innerText = '';
            }, 300);
        }
        modal.addEventListener('click', function(e) {
            if (e.target === modal) { closeAIModal(); }
        });

        async function generateBlessing() {
            const relation = document.getElementById('ai-relation').value;
            const style = document.getElementById('ai-style').value;
            const resultContainer = document.getElementById('ai-result-container');
            const resultText = document.getElementById('ai-result-text');
            const loading = document.getElementById('ai-loading');
            const generateBtn = document.getElementById('generate-btn');

            resultContainer.classList.remove('hidden');
            loading.classList.remove('hidden');
            resultText.innerText = '';
            generateBtn.disabled = true;
            generateBtn.classList.add('opacity-50', 'cursor-not-allowed');

            // å¡«å…¥æ‚¨çš„ API Key
            const apiKey = "AIzaSyBk_tRJBj3Idmt5Al_CuofNikA-F3Ba86E"; 
            const prompt = `å¯«ä¸€å¥çµ¦æ–°äºº "æŒ¯ç¿° & ä½©åŸ" çš„çµå©šç¥ç¦ã€‚æˆ‘æ˜¯æ–°äººçš„${relation}ï¼Œå¸Œæœ›èªæ°£æ˜¯${style}ã€‚è«‹ä½¿ç”¨ç¹é«”ä¸­æ–‡ï¼Œé•·åº¦ç´„30-50å­—ï¼Œä¸è¦åŒ…å«æ¨™é¡Œã€‚`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });

                if (!response.ok) throw new Error('API request failed');
                const data = await response.json();
                const text = data.candidates[0].content.parts[0].text;
                
                loading.classList.add('hidden');
                let i = 0;
                function typeWriter() {
                    if (i < text.length) {
                        resultText.innerHTML += text.charAt(i);
                        i++;
                        setTimeout(typeWriter, 30);
                    }
                }
                typeWriter();

            } catch (error) {
                console.error(error);
                loading.classList.add('hidden');
                resultText.innerText = "å“å‘€ï¼ŒAI éˆæ„Ÿæ¯ç«­äº†ï¼Œè«‹å†è©¦ä¸€æ¬¡ï¼";
            } finally {
                generateBtn.disabled = false;
                generateBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        }

        function applyBlessing() {
            const aiText = document.getElementById('ai-result-text').innerText;
            const remarksArea = document.getElementById('remarks-area');
            if (remarksArea.value) {
                remarksArea.value += "\n" + aiText;
            } else {
                remarksArea.value = aiText;
            }
            closeAIModal();
            remarksArea.scrollIntoView({ behavior: 'smooth', block: 'center' });
            remarksArea.focus();
        }
    </script>
</body>
</html>